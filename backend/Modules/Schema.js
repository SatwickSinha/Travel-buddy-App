import mongoose from 'mongoose';

const userSchema = new mongoose.Schema({
  name: { type: String, required: true },
  dob: { type: Date },
  profileRating: { type: Number, default: 0 },
  email: { type: String, required: true, unique: true },
  gender: { type: String },
  drinking: { type: Boolean },
  smoking: { type: Boolean },
  native: { type: String },
  phoneNo: { type: String },
  driving: { type: Boolean },
  pronouns: { type: String },
  religion: { type: String },
  bio: { type: String },
  language: { type: Array },
  locationPref: { type: Array },
  natureType: { type: Array },
  interestType: { type: Array },
  password: { type: String },        
  googleId: { type: String },        
  photo: { data: Buffer, contentType: String },
  createdAt: { type: Date, default: Date.now }
});

const messageSchema = new mongoose.Schema({
  chatId: String, // unique room id (e.g. user1_user2)
  sender: String, // userId or email
  receiver: String, // userId or email
  text: String,
  createdAt: { type: Date, default: Date.now },
});

const notificationSchema = new mongoose.Schema({
  userId: String, // who should receive it
  from: String,   // sender
  text: String,
  createdAt: { type: Date, default: Date.now },
  delivered: { type: Boolean, default: false }
});

export const Message = mongoose.model("Message", messageSchema);
export const Notifications = mongoose.model("Notification", notificationSchema);
export const User = mongoose.model('User', userSchema);


